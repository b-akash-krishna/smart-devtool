"""
{{ api_name }} - Python SDK
Generated by Smart DevTool
Version: {{ version }}
"""

import httpx
from typing import Any, Optional


class {{ api_name | replace(" ", "") | replace("-", "") }}Client:
    """Auto-generated client for {{ api_name }}."""

    def __init__(
        self,
        base_url: str = "{{ base_url }}",
        {% if auth.type == "bearer" %}
        token: str = "",
        {% elif auth.type == "api_key" %}
        api_key: str = "",
        {% endif %}
        timeout: float = 30.0,
    ):
        self.base_url = base_url.rstrip("/")
        self.timeout = timeout
        {% if auth.type == "bearer" %}
        self.token = token
        {% elif auth.type == "api_key" %}
        self.api_key = api_key
        {% endif %}

    def _get_headers(self) -> dict[str, str]:
        headers = {"Content-Type": "application/json", "Accept": "application/json"}
        {% if auth.type == "bearer" %}
        if self.token:
            headers["Authorization"] = f"Bearer {self.token}"
        {% elif auth.type == "api_key" %}
        if self.api_key:
            headers["{{ auth.header_name }}"] = self.api_key
        {% endif %}
        return headers

    {% for endpoint in endpoints %}
    def {{ endpoint.method | lower }}_{{ endpoint.path | replace("/", "_") | replace("{", "") | replace("}", "") | replace("-", "_") | trim("_") }}(
        self,
        {% for param in endpoint.parameters %}
        {% if param.required %}
        {{ param.name }}: {{ param.type | python_type }},
        {% endif %}
        {% endfor %}
        {% for param in endpoint.parameters %}
        {% if not param.required %}
        {{ param.name }}: Optional[{{ param.type | python_type }}] = None,
        {% endif %}
        {% endfor %}
        {% if endpoint.method in ["POST", "PUT", "PATCH"] %}
        body: Optional[dict[str, Any]] = None,
        {% endif %}
    ) -> Any:
        """{{ endpoint.summary }}
        
        {% if endpoint.description %}
        {{ endpoint.description }}
        {% endif %}
        {% for param in endpoint.parameters %}
        :param {{ param.name }}: {{ param.description }}
        {% endfor %}
        """
        url = f"{self.base_url}{{ endpoint.path }}"
        params = {}
        {% for param in endpoint.parameters %}
        {% if param.location == "query" %}
        if {{ param.name }} is not None:
            params["{{ param.name }}"] = {{ param.name }}
        {% endif %}
        {% endfor %}

        with httpx.Client(timeout=self.timeout) as client:
            response = client.{{ endpoint.method | lower }}(
                url,
                headers=self._get_headers(),
                {% if endpoint.method in ["POST", "PUT", "PATCH"] %}
                json=body,
                {% endif %}
                params=params or None,
            )
            response.raise_for_status()
            return response.json()

    {% endfor %}